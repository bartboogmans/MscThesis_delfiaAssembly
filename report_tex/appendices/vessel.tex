% This file was automatically created from the m-file 
% "m2tex.m" written by USL. 
% The fontencoding in this file is UTF-8. 
%  
% You will need to include the following two packages in 
% your LaTeX-Main-File. 
%  
% \usepackage{color} 
% \usepackage{fancyvrb} 
%  
% It is advised to use the following option for Inputenc 
% \usepackage[utf8]{inputenc} 
%  
  
% definition of matlab colors: 
\definecolor{mblue}{rgb}{0,0,1} 
\definecolor{mgreen}{rgb}{0.13333,0.5451,0.13333} 
\definecolor{mred}{rgb}{0.62745,0.12549,0.94118} 
\definecolor{mgrey}{rgb}{0.5,0.5,0.5} 
\definecolor{mdarkgrey}{rgb}{0.25,0.25,0.25} 
  
\DefineShortVerb[fontfamily=courier,fontseries=m]{\$} 
\DefineShortVerb[fontfamily=courier,fontseries=b]{\#} 
  
\noindent                                                                                                            $$\color{mblue}$classdef$\color{black}$ Vessel < handle$\\ $$\color{mgreen}#%% Vessel is a base class for tracking and operating different types of vessels#\color{black}$$\\ $    $\color{mgreen}$% Developed for used in a 3DOF setting (x,y,yaw), in the Researchlab$\color{black}$$\\ $    $\color{mgreen}$% Autonomous Shipping Delft$\color{black}$$\\ $    $\color{mgreen}$%$\color{black}$$\\ $    $\color{mgreen}$% (c) Bart Boogmans 2020/2021 bartboogmans@hotmail.com,$\color{black}$$\\ $    $\color{mgreen}$% You may use, distribute and modify this code under given that clear$\color{black}$$\\ $    $\color{mgreen}$% credit is given to the author's work. $\color{black}$$\\ $    properties$\\ $        $\\ $        $\color{mgreen}$% State$\color{black}$$\\ $        x               $\color{mgreen}$% [m,m,rad,m/s,m/s,rad/s] state vector x = [ x y psi u v r]'$\color{black}$$\\ $        $\\ $        $\color{mgreen}$% Parameters$\color{black}$$\\ $        l               $\color{mgreen}$% [m] Width$\color{black}$$\\ $        w               $\color{mgreen}$% [m] Length$\color{black}$$\\ $        m               $\color{mgreen}$% [kg] Mass of the vessel$\color{black}$$\\ $        r_CoM           $\color{mgreen}$% [m] Location of Centre of mass in vessel frame. $\color{black}$$\\ $        M               $\color{mgreen}$%  3x3 inertial matrix (DOFSs are x,y,yaw)$\color{black}$$\\ $        $\\ $        $\color{mgreen}$% Display $\color{black}$$\\ $        outline         $\color{mgreen}$% [m] array used for drawing outer perimeter$\color{black}$$\\ $        color           $\color{mgreen}$% [1x3 colormap] Color to be displayed$\color{black}$$\\ $        name            $\color{mgreen}$% [String] Name of the vessel. This name is recommended to be unique on the network, to allow using this field for identification. $\color{black}$$\\ $        plotname        $\color{mgreen}$% [Boolean] if name is to be displayed$\color{black}$$\\ $        plotaxis        $\color{mgreen}$% [Boolean] if local axis is to be displayed$\color{black}$$\\ $        plotCG          $\color{mgreen}$% [Boolean] if centre of gravity is to be shown$\color{black}$$\\ $        $\\ $    $\color{mblue}$end$\color{black}$$\\ $    methods$\\ $        $\color{mgreen}$% vessel class constructor$\color{black}$$\\ $        $\color{mblue}$function$\color{black}$ obj = Vessel(x_,y_,yaw_,name_)$\\ $            $\color{mgreen}$% Set state and name$\color{black}$$\\ $            obj.x = [0;0;0;0;0;0];$\\ $            $\\ $            $\color{mblue}$if$\color{black}$ nargin >= 2$\\ $                obj.x(1:3) = [x_;y_;yaw_];$\\ $            $\color{mblue}$end$\color{black}$$\\ $            $\color{mblue}$if$\color{black}$ nargin == 4$\\ $                obj.name = name_;$\\ $            $\color{mblue}$else$\color{black}$$\\ $                obj.name = char(randi([97 122],1,8)); $\color{mgreen}$% randomize$\color{black}$$\\ $            $\color{mblue}$end$\color{black}$$\\ $            $\\ $            $\color{mgreen}$% Set generic default values.$\color{black}$$\\ $            obj.r_CoM = [0;0]; $\\ $            obj.w = 0.20;$\\ $            obj.l = 0.30;$\\ $            $\\ $            $\color{mgreen}$% Set display parameters$\color{black}$$\\ $            colors = jet();     $\color{mgreen}$% Color palette to choose from$\color{black}$$\\ $            obj.color = colors(randi(length(colors)),:); $\color{mgreen}$% Give this vessel a random color$\color{black}$$\\ $            $\\ $            obj.color = obj.color*0.7; $\color{mgreen}$% make these objects a little darker$\color{black}$$\\ $$\\ $            obj.plotname = false;$\\ $            obj.plotaxis = true;$\\ $            obj.makeOutlineRectangle;$\\ $        $\color{mblue}$end$\color{black}$$\\ $        $\\ $        $\color{mgreen}$% Calculate error with respect to input reference. Note that this$\color{black}$$\\ $        $\color{mgreen}$% function also manages the 0-2pi discontinuity in heading error by$\color{black}$$\\ $        $\color{mgreen}$% bounding between -pi and pi. $\color{black}$$\\ $        $\color{mblue}$function$\color{black}$ e = calcError(obj,x_r)$\\ $            e =     [   x_r(1)-obj.x(1),...$\\ $                x_r(2)-obj.x(2),...$\\ $                x_r(3)$\color{mred}$-obj.x(3) - 2*pi*floor( (x_r(3)-obj.x(3)+pi)/(2*pi) ),...$\color{black}$$\\ $                x_r(4)-obj.x(4),...$\\ $                x_r(5)-obj.x(5),...$\\ $                x_r(6)-obj.x(6)         $\color{mred}$];$\color{black}$$\\ $        $\color{mblue}$end$\color{black}$$\\ $        $\\ $        $\color{mgreen}$%% Display$\color{black}$$\\ $        $\\ $        $\color{mgreen}$% Plot the vessel object$\color{black}$$\\ $        $\color{mblue}$function$\color{black}$ plotVessel(obj,UI_axis)$\\ $            $\\ $            $\color{mblue}$if$\color{black}$ ~isempty(obj.outline)$\\ $                R=R2d(obj.x(3));$\\ $                hull_vector = R*obj.outline + obj.x(1:2); $\color{mgreen}$% Convert to global frame$\color{black}$$\\ $                plot(UI_axis,hull_vector(1,:),hull_vector(2,:),$\color{mred}$'color'$\color{black}$,obj.color,$\color{mred}$'LineWidth'$\color{black}$,1.5);$\\ $            $\color{mblue}$end$\color{black}$$\\ $            $\\ $            $\color{mgreen}$% Display local axis$\color{black}$$\\ $            $\color{mblue}$if$\color{black}$ obj.plotaxis==true$\\ $                L_axis = max(obj.w,obj.l)/4; $\color{mgreen}$% to scale axis to vessel$\color{black}$$\\ $                R=R2d(obj.x(3));$\\ $                rx = R*[0,L_axis;0,0]+ obj.x(1:2);$\\ $                ry = R*[0,0;0,L_axis]+ obj.x(1:2);$\\ $                plot(UI_axis,rx(1,:),rx(2,:),$\color{mred}$'color'$\color{black}$,$\color{mred}$'red'$\color{black}$);$\\ $                plot(UI_axis,ry(1,:),ry(2,:),$\color{mred}$'color'$\color{black}$,$\color{mred}$'green'$\color{black}$);$\\ $            $\color{mblue}$end$\color{black}$$\\ $            $\\ $            $\color{mgreen}$% Display name$\color{black}$$\\ $            $\color{mblue}$if$\color{black}$ obj.plotname == true$\\ $                text(UI_axis,obj.x(1),obj.x(2),obj.name,$\color{mred}$'Color'$\color{black}$,$\color{mred}$'black'$\color{black}$,$\color{mred}$'FontSize'$\color{black}$,12,$\color{mred}$'HorizontalAlignment'$\color{black}$,$\color{mred}$'center'$\color{black}$,$\color{mred}$'Interpreter'$\color{black}$,$\color{mred}$'latex'$\color{black}$,$\color{mred}$'BackgroundColor'$\color{black}$, $\color{mred}$'white'$\color{black}$);$\\ $            $\color{mblue}$end$\color{black}$$\\ $        $\color{mblue}$end$\color{black}$$\\ $        $\\ $        $\color{mgreen}$% Make the object's  display outline a simple rectangle based on $\color{black}$$\\ $        $\color{mgreen}$% its width and length. $\color{black}$$\\ $        $\color{mblue}$function$\color{black}$ makeOutlineRectangle(obj)$\\ $            obj.outline = [obj.l/2, -obj.l/2, -obj.l/2, obj.l/2, obj.l/2; obj.w/2, obj.w/2 , -obj.w/2, -obj.w/2, obj.w/2];$\\ $        $\color{mblue}$end$\color{black}$$\\ $        $\\ $    $\color{mblue}$end$\color{black}$$\\ $$\color{mblue}$end$\color{black}$$\\ 
  
\UndefineShortVerb{\$} 
\UndefineShortVerb{\#}